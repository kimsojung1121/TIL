## 처음 해보는 Servlet & JSP 웹 프로그래밍
루비페이퍼, 오정임 지음

> 목적 : 웹과 서블릿, JSP 매커니즘에 대해 기록하고 실무에서 활용할 수 있도록 충분히 이해하고 숙지하기 ✏

## 목차
### [01. 서블릿 프로그래밍](#서블릿-프로그래밍)
### 02. JSP 프로그래밍 1
### 03. JSP 프로그래밍 2
### 04. MVC 기반 웹 프로젝트

---

## 서블릿 프로그래밍
### 01. 자바와 웹

#### 1.1 자바와 기술의 동향과 종류
1. **Java SE**(Java Platform, Standard Edition)
    - 데스크톱, 서버, 임베디드 시스템 개발을 위한 표준 자바 플랫폼
    - 자바의 기본 개발 환경 제공
    - **JDK**(자바 개발 환경)와 **JRE**(자바 런타임 환경) 두 가지로 나누어 제공
      - JDK(Java Development Kit) : JVM(Java Virtual Machine)과 컴파일러, 디버거 및 애플리케이션 개발을 위한 도구들이 포함되어 있다.
      - JRE(Java Runtime Envrionment) : JDK의 일부로서, 자바 애플리케이션이 실행되는 데 필요한 최소한의 요건을 제공하며, JVM과 핵심적인 클래스들 그리고 각종 지원 파일들로 구성된다.
2. **Java EE**(Java Evterprise Edition)
    - Java SE에 웹서버 역할을 추가
    - 자바 애플리케이션을 동작하게 하는 컨테이너 등을 표준화한 스펙
    - Java EE의 기술
      - **EJB** : JSP, Servlet과 비즈니스 모듈 담당
      - **JDBC** : 데이터베이스 연동
      - **JNDI, JTA, EJB** : 서버의 자원을 관리
3. **Java ME**(Java Micro Edition)
    - 모바일 장치나 내장형 장치와 같은 소형장치에서 실행되는 자바 애플리케이션을 지원하기 위해 경량화된 기술들을 지원하는 플랫폼
    - 기업용 무선 애플리케이션을 사용할 때 Java EE와 쉽게 통합할 수 있음
    - 풍부한 UI와 이벤트 핸들링 라이브러리 제공
    - 소형장치에서 실행할 수 있도록 자바 VM을 경량화한 KVM, CardVM 기술 지원

#### 1.2 웹에서의 자바 기술
1. **애플릿**(Applet)
    - 서버에서 클라이언트 쪽으로 실행 파일을 내려받아 실행되는 방식
    - 웹 시장과 더불어 자바의 급성장에 기여
    - 현재는 HTML5, CSS, jQuery 등의 기술들이 대체되어 사용
    - 초창기 웹은 정적인 페이지만을 보여주었는데, 애플릿의 등장으로 동적인 데이터를 처리할 수 있게 되었음
2. **서블릿**(Servlet)
    - 애플릿은 클라이언트 측에 내려받아서 실행되는 약점이 있었음
    - 이를 극복하기 위해 자바 언어로 구현되는 서버 프로그램인 서블릿 등장
    - 클라이언트가 웹 브라우저를 통해 요청하면, 서버에서 실행한 후 결과값만 클라이언트로 전송
    - HTTP 프로토콜로 통신하는 웹의 특징과 속성들을 자유롭게 활용할 수 있는 API 제공 - 클라이언트의 요청과 서버의 응답에 관한 처리 작업이 쉬워짐
3. **JSP**(JavaServer Page)
    - 서블릿과 동일한 기능을 가지고 있으나, 표현하는 방법과 웹 애플리케이션에서의 역할에 차이 존재
      - 1. 서블릿은 자바 언어로 구현해야 하지만, JSP는 HTML 페이지 안에서 스크립트 형태로 구현된다.
      - 2. 내부적으로 자동으로 코드가 생성되기 때문에 일부 서블릿 객체를 변수 선언과 초기와 작업 없이 사용할 수 있다.
      - 3. 서블릿은 컨트롤러 페이지를 만들 때 사용하지만 JSP는 뷰 페이지를 만들 때 사용한다.

#### 1.3 웹 프로그래밍의 이해
1. 웹
    - **웹 문서**
      - 웹에서 클라이언트가 서버에 정보를 요청하면 응답하는 콘텐츠
      - 정적인 웹 문서와 동적인 웹 문서로 구분
      - 정적인 웹 문서 : **HTML, GIF, JPG, PDF, PPT** 등
      - 동적인 웹 문서 : **CGI, ASP, PHP, Servlet, JSP**
        > 동적인 웹 문서 처리 방법
        > 1. 클라이언트가 서버에 웹 문서를 요청하면 웹 문서에 동적인 요소를 포함하는 방식(스크립트 방식)
        > 2. 클라이언트가 서버에 웹 문서를 요청하면 서버가 다른 애플리케이션을 통해 웹 문서를 재생성하여 제공하는 방식
    - **웹 애플리케이션**
      - 간단하게 웹에서 수행되능 애플리케이션
      - 수행되는 위치에 따라 **Server Side**와 **Client Side**로 나뉨
      - 구현하는 방식에 따라 **컴파일 방식**과 **비컴파일 방식**(스크립트 방식)으로 나뉨
    - **웹 서비스**
      - 네트워크상에 분산된 자원들을 이기종 간에 서로 연동하여 자원을 공유하기 위한 추상적인  서비스 형태
      - **SOAP 기반 웹 서비스**와 **RESTful 기반 웹 서비스**로 나뉨
        > SOAP 기반 웹 서비스 : 서비스 제공자가 서비스하려는 자원을 UDDI 저장소에 등록하여 공개하면, 서비스 요청자가 검색한 후 응용 프로토콜인 SOAP를 이용하여 메시지를 주고받는 방식 
        > > 주고받는 SOAP 메시지는 하나의 XML 문서로 표현되며 HTTP로 전달되는데 <br>크기가 크고 송수신 시 헤더와 몸체를 인코딩/디코딩해야 한다.  <br>
        
        > RESTful 기반 웹 서비스 : SOAP 기반 웹 서비스의 문제점(오버헤드, 인코딩/디코딩)을 보완할 수 있는 REST 기반의 웹 서비스로서, HTTP의 기본 긱능만으로 원격 정보에 접근 
        > > 서비스 등록 저장소가 필요하지 않으며, 단순 서버와 클라이언트로만 분리되어 있다.<br>클라이언트에서 XML, JSON, HTML, 텍스트, 이미지 등 원하는 형식으로 표현 가능하다.
2. 웹서버와 웹 애플리케이션 서버
    - **웹 서버**
      - 웹에서 서버 기능을 수행하는 프로그램
      - HTTP 프로토콜을 기반으로 웹 클라이언트(브라우저)로부터의 요청을 서비스하는 기능 담당
      - 처리 기능
        > 1. 클라이언트가 요청한 웹 문서를 찾아 전달
        > 2. 요청 파일이 없거나 문제가 발생하면 정해진 코드값으로 응답
        > 3. 클라이언트로부터의 요청에 대한 기본 사용자 인증
        > 4. 서버 프로그램에 대한 요청을 웹 애플리케이션 서버에 수행시키고 결과 응답
    - **웹 어플리케이션 서버**(WAS)
      - 웹 서버의 기능을 분리해서 처리하려는 목적
        > 웹서버에서는 서비스를 위해 HTML 외에도 다양한 형식의 문서와 웹 애플리케이션을 처리하는데, <br>여러 요구들을 단독으로 처리하면 서버의 처리량이 많아지고 속도 및 보안에 문제가 생긴다.
      - 클라이언트의 요청과 화면에 표현하는 로직(Presentation Logic)은 웹서버에서 담당하고, 기능을 수행하는 로직(Business Logic)은 컨테이너가 담당하도록 역할을 분담
      - 웹 서버 기능과 컨테이너 기능으로 구성
      - 상용화된 WAS는 웹서버 기능과 컨테이너 기능 외에 트랜잭션, 보안, 트래픽 관리, DB 커넥션 풀, 사용자 관리 등의 다양하고 강력한 기능 제공
      - 즉, Java EE 기술을 지원하는 서버로서 웹서버 기능에 서블릿&JSP 컨테이너, EJB 컨테이너 기능까지 지원하는 서버를 제공
      - WAS를 Java EE 서버라고도 함
      - 웹로직, 웹스피어, 제우스, 제이보스, 톰캣 등이 있음
3. 컨테이너
    - 웹 컴포넌트를 저장하는 저장소 역할, 메모리 로딩, 객체 생성 및 초기화 등 서블릿의 생명주기를 관리하고 JSP를 서블릿으로 변환하는 기능을 수행하는 프로그램
    - **서블릿 컨테이너**
      - 서블릿을 수행하려면 다음과 같은 환경이 구성되어야 함
        > 1. 자바 수행 환경
        > 2. 웹서버
        > 3. 서블릿 컨테이너
      - 클라이언트의 요청에 따라 서블릿을 수행하는 프로그램
      - 서블릿 표준 API에서 제공하는 추상 클래스와 인터페이스를 구현한 클래스를 제공하여 기본적인 동작 방식과 API 호환성 지원
      - 다른 서블릿  컨테이너를 기반으로 개발하더라도 또 다른 컨테이너를 기반으로 수행 및 유지보수를 할 수 있음
      - 즉, 서블릿 프로그래밍은 서블릿 컨테이너의 종류와 관계 없음
    - **JSP 컨테이너**
      - JSP를 수행하려면 다음과 같은 환경이 구성되어야 함
        > 자바 수행 환경
        > 웹서버
        > 서블릿 컨테이너
        > JSP 컨테이너
      - JSP를 서블릿으로 변환하는 프로그램
      - JSP 파일을 서블릿 소스로 변환 및 컴파일까지만 담당하는 프로그램이며, 변환된 서블릿의 수행은 서블릿 컨테이너가 담당함
    - 대부분 WA에서는 서블릿 컨테이너와 JSP 컨테이너를 내장

#### 1.4 HTTP 프로토콜의 이해
> 서버와 클라이언트 간에 HTTP 프로토콜을 기반으로 동작하기 때문에, 통신 방식에 대한 이해가 필요함
1. HTTP란?
    - Hyper Text Transfer Protocol
    - TCP/IP 4계층에서 애플리케이션 계층에 해당하는 프로토콜로서, 전송 계층에서 TCP를 사용하여 웹 브라우저와 웹 서버 간에 통신하는 프로토콜
    - 웹 브라우저와 웹 서버가 통신할 때 서로 약속된 요청, 응답 메시지를 주고받으며 통신이 이루어짐
    - 특징
      - 무연결
        - HTTP는 클라이언트와 서버 간에 요청이 있을 때마다 독립적으로 연결하여 통신하는 방식이다.
        - 클라이언트와 서버의 요청 단위로 새로운 연결을 처리해야 한다는 단점이 있다
      - 무상태
        - 요청마다 서로 다른 연결로 인식되어 요청 간에 정보를 공유해서 사용할 수 없는 상태
        - 이전 요청 시 사용한 정보를 계속 사용하고 싶다면 정보 유지기술이 필요
      - 요청과 응답
        - 요청정보와 응답정보를 주고받으며 통신이 이루어지는 방식
2. HTTP 요청정보
    
